# _templates/CLAUDE.md

## 🎯 目的・役割

コード生成テンプレート管理。Hygen を使用した自動コード生成のテンプレート群を提供し、一貫性のあるコード構造と開発効率の向上を実現。

## 🏗️ 技術構成
- **主要技術**: Hygen, EJS Template Engine
- **依存関係**: hygen コマンドライン、プロジェクト構造定義
- **関連システム**: 開発ワークフロー、コード生成パイプライン

## 📁 ディレクトリ構造
```
_templates/
├── CLAUDE.md
├── api/                    # API関連生成テンプレート
│   └── new/
│       ├── def.ejs.t               # API定義ファイル生成
│       ├── prompt.js               # 対話プロンプト設定
│       └── route.ejs.t             # APIルート生成
├── generator/              # ジェネレータ管理テンプレート
│   ├── help/
│   │   └── index.ejs.t             # ヘルプ情報生成
│   ├── new/
│   │   └── hello.ejs.t             # 新規ジェネレータ雛形
│   └── with-prompt/
│       ├── hello.ejs.t             # プロンプト付きジェネレータ
│       └── prompt.ejs.t            # プロンプト設定テンプレート
└── init/                   # 初期化テンプレート
    └── repo/
        └── new-repo.ejs.t          # 新規リポジトリ初期化
```

## 🔧 主要機能

### API自動生成
- 標準化されたAPI定義ファイルの生成
- 型安全なAPIルートの自動作成
- 一貫性のあるAPI構造の保証

### ジェネレータ管理
- カスタムジェネレータの作成支援
- テンプレート拡張の標準化
- 対話型生成プロセスの提供

### プロジェクト初期化
- 新規機能・モジュールの雛形生成
- 標準的なディレクトリ構造の作成
- ベストプラクティスの自動適用

## 💡 使用パターン

### API生成
```bash
# 新規API作成
pnpm run api:new

# 対話的にAPI定義を入力
# → def.ts と route.ts が自動生成
```

### カスタムジェネレータ作成
```bash
# 新規ジェネレータ作成
hygen generator new [name]

# プロンプト付きジェネレータ
hygen generator with-prompt [name]
```

### プロジェクト初期化
```bash
# 新規リポジトリ初期化
hygen init repo [name]
```

## 🗺️ プロジェクト内での位置づけ

### 生成フロー
```
開発者入力 → Hygen実行 → テンプレート適用 → コード生成
          ↓
品質保証 → 標準化確保 → 開発効率向上
```

### 他システムとの関係
- **API Generator** (`../packages/api-generator/`): API定義の生成元
- **開発ワークフロー**: 自動化プロセスの一部
- **品質管理**: 一貫性のあるコード品質保証
- **新規開発**: 初期コード作成の支援

### 責務の境界
- **責務内**: コードテンプレートの管理、生成ロジック
- **責務外**: 生成後のビジネスロジック実装、詳細設計

## 🔗 関連ディレクトリ
- [API Generator](../packages/api-generator/) - 生成対象システム
- [Webアプリ](../packages/web-app/) - 生成コードの配置先
- [バックエンドコア](../packages/backend-core/) - サーバー側生成対象
- [プロジェクトルート](../) - 初期化対象

## 📚 ドキュメント・リソース
- Hygen Documentation
- EJS Template Guide
- プロジェクトコーディング規約
- API設計ガイドライン

## 📝 開発メモ

### 設計思想
- DRY原則に基づく重複排除
- 一貫性のあるコード品質確保
- 開発者体験の向上

### テンプレート作成のベストプラクティス
- 明確な命名規則の適用
- 柔軟性と標準化のバランス
- 拡張可能な構造設計

### 注意点
- テンプレートの過度な複雑化回避
- 生成コードの可読性確保
- プロジェクト構造変更への追従

### メンテナンス戦略
- 定期的なテンプレート見直し
- 生成コードの品質監視
- 開発者フィードバックの反映

### パフォーマンス考慮事項
- 生成速度の最適化
- テンプレートサイズの管理
- 依存関係の最小化

### 将来の拡張計画
- AI支援による高度なコード生成
- 動的テンプレート選択
- 生成コードの自動テスト
- テンプレートのバージョン管理

### トラブルシューティング
- 生成エラーの診断
- テンプレート構文エラーの解決
- 依存関係の問題解決

---
*Documentation-Agent作成: 2025-01-24*