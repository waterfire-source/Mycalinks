# workers/product/CLAUDE.md

## ğŸ¯ ç›®çš„ãƒ»å½¹å‰²

åœ¨åº«å•†å“ã®éåŒæœŸå‡¦ç†ã‚’æ‹…å½“ã™ã‚‹ãƒ¯ãƒ¼ã‚«ãƒ¼ã‚µãƒ¼ãƒ“ã‚¹ã€‚åœ¨åº«å…¥å‡ºåº«ãƒ»å•†å“æ›´æ–°ãƒ»åœ¨åº«ç§»å‹•å‡¦ç†ã‚’åŠ¹ç‡çš„ã«å®Ÿè¡Œã—ã€ãƒ‡ãƒ¼ã‚¿æ•´åˆæ€§ã‚’ä¿è¨¼ã€‚

## ğŸ—ï¸ æŠ€è¡“æ§‹æˆ
- **ã‚¤ãƒ³ãƒ•ãƒ©**: AWS Copilot (ECS)
- **ã‚³ãƒ³ãƒ†ãƒŠ**: Docker + Node.js 23.9.0
- **ã‚ªãƒ¼ã‚±ã‚¹ãƒˆãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³**: AWS SQS + ECS ã‚¿ã‚¹ã‚¯
- **ä¾å­˜é–¢ä¿‚**: backend-core, common, Prisma ORM

## ğŸ“ ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ 
```
workers/product/
â”œâ”€â”€ package.json              # ä¾å­˜é–¢ä¿‚å®šç¾©
â”œâ”€â”€ tsconfig.json             # TypeScriptè¨­å®š
â””â”€â”€ src/
    â”œâ”€â”€ index.ts              # ãƒ¯ãƒ¼ã‚«ãƒ¼ã‚¨ãƒ³ãƒˆãƒªãƒ¼ãƒã‚¤ãƒ³ãƒˆ
    â””â”€â”€ controllers/
        â”œâ”€â”€ productStocking/
        â”‚   â””â”€â”€ main.ts       # åœ¨åº«å…¥å‡ºåº«å‡¦ç†
        â””â”€â”€ updateProduct/
            â””â”€â”€ main.ts       # å•†å“æ›´æ–°å‡¦ç†
```

## â˜ï¸ AWS ãƒªã‚½ãƒ¼ã‚¹
- **ã‚µãƒ¼ãƒ“ã‚¹**: ECS Fargate
- **ãƒªãƒ¼ã‚¸ãƒ§ãƒ³**: ç’°å¢ƒä¾å­˜
- **ç’°å¢ƒè¨­å®š**: RDSæ¥ç¶šã€Redis ã‚­ãƒ£ãƒƒã‚·ãƒ¥

## ğŸ”„ ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ¡ãƒ³ãƒˆ
- **ãƒ‡ãƒ—ãƒ­ã‚¤æˆ¦ç•¥**: Blue-Green (Copilot managed)
- **ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³**: GitHub Actions â†’ AWS Copilot
- **ç’°å¢ƒåˆ‡ã‚Šæ›¿ãˆ**: è‡ªå‹• (copilot/worker-product/)

## ğŸ”§ ä¸»è¦æ©Ÿèƒ½
- **åœ¨åº«å…¥åº«**: æ–°è¦åœ¨åº«ã®ç™»éŒ²ãƒ»æ—¢å­˜åœ¨åº«ã®è¿½åŠ 
- **åœ¨åº«å‡ºåº«**: è²©å£²ãƒ»ç§»å‹•ã«ã‚ˆã‚‹åœ¨åº«æ¸›ç®—
- **åœ¨åº«ç§»å‹•**: åº—èˆ—é–“ãƒ»å€‰åº«é–“ã®åœ¨åº«ç§»å‹•
- **åœ¨åº«å±¥æ­´**: åœ¨åº«å¤‰å‹•ã®è©³ç´°è¨˜éŒ²ã¨è¿½è·¡

## ğŸ’¡ é‹ç”¨ãƒ‘ã‚¿ãƒ¼ãƒ³
- ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³ä¿è¨¼ã«ã‚ˆã‚‹åœ¨åº«æ•´åˆæ€§ç¢ºä¿
- åœ¨åº«æ•°ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æ›´æ–°ã¨ã‚­ãƒ£ãƒƒã‚·ãƒ¥ç„¡åŠ¹åŒ–
- åœ¨åº«ä¸è¶³æ™‚ã®è‡ªå‹•ã‚¢ãƒ©ãƒ¼ãƒˆç”Ÿæˆ

## ğŸ“Š ç›£è¦–ãƒ»ãƒ­ã‚°
- **ç›£è¦–é …ç›®**: åœ¨åº«å‡¦ç†æ™‚é–“ã€ã‚¨ãƒ©ãƒ¼ç‡ã€åœ¨åº«æ•´åˆæ€§
- **ãƒ­ã‚°å‡ºåŠ›**: CloudWatch Logsã€åœ¨åº«å¤‰å‹•å±¥æ­´
- **ã‚¢ãƒ©ãƒ¼ãƒˆè¨­å®š**: åœ¨åº«æ•°ä¸æ•´åˆã€å‡¦ç†å¤±æ•—ç‡ > 1%

## ğŸ”— é–¢é€£ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª
- [workers/](../) - ãƒ¯ãƒ¼ã‚«ãƒ¼å…¨ä½“çµ±æ‹¬
- [packages/backend-core/src/services/internal/product/](../../packages/backend-core/src/services/internal/product/) - åœ¨åº«ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯
- [copilot/worker-product/](../../copilot/worker-product/) - ãƒ‡ãƒ—ãƒ­ã‚¤è¨­å®š

## ğŸ“ é‹ç”¨ãƒ¡ãƒ¢
- **ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹**: å¤§é‡åœ¨åº«å‡¦ç†æ™‚ã®ãƒ‡ãƒƒãƒ‰ãƒ­ãƒƒã‚¯å›é¿
- **ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£**: åœ¨åº«ãƒ‡ãƒ¼ã‚¿ã®æ”¹ã–ã‚“é˜²æ­¢ã€æ“ä½œæ¨©é™ç®¡ç†
- **ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°**: åœ¨åº«å·®ç•°ç™ºç”Ÿæ™‚ã®èª¿æŸ»ãƒ»ä¿®æ­£æ‰‹é †

---
*Infrastructure-Agentä½œæˆ: 2025-01-24*