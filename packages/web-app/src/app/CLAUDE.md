# app/CLAUDE.md

## ğŸ¯ ç›®çš„ãƒ»å½¹å‰²

Next.js 14 App Routerãƒ™ãƒ¼ã‚¹ã®ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã¨ãƒšãƒ¼ã‚¸æ§‹æˆã‚’ç®¡ç†ã€‚POSæ¥­å‹™ã€ECã‚µã‚¤ãƒˆã€MycaLinksã‚µãƒ¼ãƒ“ã‚¹ã€èªè¨¼ãƒ•ãƒ­ãƒ¼ã‚’çµ±åˆçš„ã«ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã—ã€ãƒãƒ«ãƒãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ å¯¾å¿œã®Webã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’å®Ÿç¾ã™ã‚‹ã€‚

## ğŸ—ï¸ æŠ€è¡“æ§‹æˆ

- **ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯**: Next.js 14.2.3 (App Router)
- **ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°**: ãƒ•ã‚¡ã‚¤ãƒ«ãƒ™ãƒ¼ã‚¹ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã€Dynamic Routesã€Route Groups
- **èªè¨¼**: NextAuth.js v4 ã‚»ãƒƒã‚·ãƒ§ãƒ³ç®¡ç†
- **ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ**: Nested Layoutsã€å…±é€šãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
- **API**: Route Handlers (RESTful API)
- **ã‚¹ã‚¿ã‚¤ãƒªãƒ³ã‚°**: CSS Modulesã€Global CSS
- **ä¾å­˜é–¢ä¿‚**: `next`, `next-auth`, React 18

## ğŸ“ ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ 

```
app/
â”œâ”€â”€ api/                      # API Route Handlers
â”‚   â”œâ”€â”€ auth/                 # NextAuthèªè¨¼API
â”‚   â”œâ”€â”€ store/[store_id]/     # åº—èˆ—åˆ¥APIã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ
â”‚   â”œâ”€â”€ account/              # ã‚¢ã‚«ã‚¦ãƒ³ãƒˆç®¡ç†API
â”‚   â”œâ”€â”€ contract/             # å¥‘ç´„ãƒ»æ±ºæ¸ˆAPI
â”‚   â”œâ”€â”€ corporation/          # ä¼æ¥­ç®¡ç†API
â”‚   â”œâ”€â”€ ec/                   # ECã‚µã‚¤ãƒˆAPI
â”‚   â””â”€â”€ system/               # ã‚·ã‚¹ãƒ†ãƒ ç®¡ç†API
â”œâ”€â”€ auth/                     # èªè¨¼å¾ŒPOSæ¥­å‹™ç”»é¢
â”‚   â”œâ”€â”€ (dashboard)/          # ãƒ¡ã‚¤ãƒ³ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰
â”‚   â””â”€â”€ setup/                # åˆæœŸè¨­å®šãƒ•ãƒ­ãƒ¼
â”œâ”€â”€ ec/                       # ECã‚µã‚¤ãƒˆï¼ˆä¸€èˆ¬é¡§å®¢å‘ã‘ï¼‰
â”‚   â”œâ”€â”€ (core)/               # ECæ©Ÿèƒ½ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
â”‚   â””â”€â”€ (auth)/               # ECèªè¨¼ã‚¨ãƒªã‚¢
â”œâ”€â”€ mycalinks/                # MycaLinksã‚µãƒ¼ãƒ“ã‚¹
â”‚   â”œâ”€â”€ (auth)/               # æŸ»å®šãƒ»ä¼šå“¡æ©Ÿèƒ½
â”‚   â””â”€â”€ (core)/               # ã‚µãƒ¼ãƒ“ã‚¹åŸºç›¤
â”œâ”€â”€ guest/[storeId]/          # ã‚²ã‚¹ãƒˆå‘ã‘æ©Ÿèƒ½
â”œâ”€â”€ login/                    # ãƒ­ã‚°ã‚¤ãƒ³ãƒ»èªè¨¼
â”œâ”€â”€ register/                 # æ–°è¦ç™»éŒ²
â””â”€â”€ error/                    # ã‚¨ãƒ©ãƒ¼ãƒšãƒ¼ã‚¸
```

## ğŸ”§ ä¸»è¦æ©Ÿèƒ½

### ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°æˆ¦ç•¥
- **Route Groups**: `(dashboard)`, `(auth)`, `(core)` ã§æ©Ÿèƒ½åˆ†é›¢
- **Dynamic Routes**: `[store_id]`, `[item_id]` ã§å‹•çš„ãƒšãƒ¼ã‚¸
- **Nested Layouts**: å„ã‚»ã‚¯ã‚·ãƒ§ãƒ³å›ºæœ‰ã®ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆé©ç”¨
- **Parallel Routes**: è¤‡æ•°ã‚³ãƒ³ãƒ†ãƒ³ãƒ„åŒæ™‚è¡¨ç¤º

### èªè¨¼ãƒ»ã‚»ãƒƒã‚·ãƒ§ãƒ³ç®¡ç†
- NextAuth.js ã‚»ãƒƒã‚·ãƒ§ãƒ³ãƒ™ãƒ¼ã‚¹èªè¨¼
- åº—èˆ—ãƒ»ä¼æ¥­åˆ¥ã‚¢ã‚¯ã‚»ã‚¹åˆ¶å¾¡
- ãƒ­ãƒ¼ãƒ«ãƒ»æ¨©é™ãƒ™ãƒ¼ã‚¹ç”»é¢è¡¨ç¤ºåˆ¶å¾¡
- SSRå¯¾å¿œã‚»ãƒƒã‚·ãƒ§ãƒ³çŠ¶æ…‹ç®¡ç†

### APIè¨­è¨ˆ
- RESTful API ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ
- åº—èˆ—åˆ¥ãƒ‡ãƒ¼ã‚¿åˆ†é›¢ (`/api/store/[store_id]/`)
- OpenAPIä»•æ§˜æº–æ‹ 
- ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°çµ±ä¸€

### ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–å¯¾å¿œ
- ãƒ¢ãƒã‚¤ãƒ«ãƒ»ã‚¿ãƒ–ãƒ¬ãƒƒãƒˆãƒ»ãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ—å¯¾å¿œ
- ãƒ‡ãƒã‚¤ã‚¹åˆ¥ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆåˆ‡ã‚Šæ›¿ãˆ
- PWAå¯¾å¿œï¼ˆService Workerã€Cache APIï¼‰

## ğŸ’¡ ä½¿ç”¨ãƒ‘ã‚¿ãƒ¼ãƒ³

### ãƒšãƒ¼ã‚¸ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
```typescript
// app/auth/(dashboard)/item/page.tsx
export default async function ItemPage({
  params,
  searchParams,
}: {
  params: { store_id: string }
  searchParams: { [key: string]: string | string[] | undefined }
}) {
  return <ItemManagementContent />
}
```

### API Route Handler
```typescript
// app/api/store/[store_id]/item/route.ts
export async function GET(
  request: Request,
  { params }: { params: { store_id: string } }
) {
  // åº—èˆ—åˆ¥å•†å“ãƒ‡ãƒ¼ã‚¿å–å¾—
}
```

### ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆç¶™æ‰¿
```typescript
// app/auth/layout.tsx
export default function AuthLayout({
  children,
}: {
  children: React.ReactNode
}) {
  return (
    <AuthProvider>
      <SideBar />
      <main>{children}</main>
    </AuthProvider>
  )
}
```

## ğŸ”— é–¢é€£ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª

- [../components/](../components/) - å†åˆ©ç”¨å¯èƒ½UIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
- [../feature/](../feature/) - æ¥­å‹™ãƒ‰ãƒ¡ã‚¤ãƒ³åˆ¥ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
- [../hooks/](../hooks/) - ã‚«ã‚¹ã‚¿ãƒ ãƒ•ãƒƒã‚¯
- [../api/](../api/) - APIå‹å®šç¾©ãƒ»ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ
- [../contexts/](../contexts/) - React Context
- [../providers/](../providers/) - ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼

## ğŸ“ é–‹ç™ºãƒ¡ãƒ¢

### App Routerç§»è¡Œã®ãƒã‚¤ãƒ³ãƒˆ
- `pages`ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‹ã‚‰`app`ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã¸ã®ç§»è¡Œå®Œäº†
- Server Components ãŒãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã€Client Components ã¯æ˜ç¤ºçš„ã«æŒ‡å®š
- `layout.tsx` ã§ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ãƒ»å…±é€šãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆç®¡ç†
- `loading.tsx`, `error.tsx` ã§ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ãƒ»ã‚¨ãƒ©ãƒ¼çŠ¶æ…‹ç®¡ç†

### ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–
- Server Components ã§ã‚µãƒ¼ãƒãƒ¼ã‚µã‚¤ãƒ‰ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°
- Dynamic Import ã§å¿…è¦æ™‚ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°
- Image Optimizationï¼ˆnext/imageï¼‰
- Route Level Code Splitting

### ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è€ƒæ…®
- CSRFãƒˆãƒ¼ã‚¯ãƒ³æ¤œè¨¼
- åº—èˆ—ãƒ»ä¼æ¥­åˆ¥ãƒ‡ãƒ¼ã‚¿ã‚¢ã‚¯ã‚»ã‚¹åˆ¶å¾¡
- SQLã‚¤ãƒ³ã‚¸ã‚§ã‚¯ã‚·ãƒ§ãƒ³å¯¾ç­–ï¼ˆPrisma ORMï¼‰
- XSSå¯¾ç­–ï¼ˆReactè‡ªå‹•ã‚¨ã‚¹ã‚±ãƒ¼ãƒ—ï¼‰

### é–‹ç™ºæ™‚ã®æ³¨æ„ç‚¹
- Route Groups `()` ã¯ URL ã«å«ã¾ã‚Œãªã„
- `metadata` ã¯ Server Components ã§ã®ã¿ä½¿ç”¨å¯èƒ½
- å‹•çš„ãƒ«ãƒ¼ãƒˆã®å‹å®‰å…¨æ€§ç¢ºä¿
- SEOå¯¾å¿œï¼ˆãƒ¡ã‚¿ã‚¿ã‚°ã€æ§‹é€ åŒ–ãƒ‡ãƒ¼ã‚¿ï¼‰

---
*Frontend-Agentä½œæˆ: 2025-01-13*